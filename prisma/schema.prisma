generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Brand {
  id        String     @id
  name      String
  medicines Medicine[]

  @@map("brands")
}

model Wholesaler {
  id        String     @id
  name      String
  medicines Medicine[]

  @@map("wholesalers")
}

model Formulation {
  id        String     @id
  name      String
  medicines Medicine[]

  @@map("formulations")
}

model Medicine {
  id             Int          @id @default(autoincrement())
  name           String
  brand_id       String
  wholesaler_id  String
  formulation_id String
  strength       String?
  pack_size      String?
  price          Decimal?     @db.Decimal(10, 2)
  stock_quantity Int?
  expiry_date    DateTime?
  batch_number   String?
  description    String?
  image_url      String?
  thumbhash      String?
  createdAt      DateTime     @default(now()) @map("created_at")
  updatedAt      DateTime     @updatedAt @map("updated_at")
  
  brand         Brand        @relation(fields: [brand_id], references: [id])
  wholesaler    Wholesaler   @relation(fields: [wholesaler_id], references: [id])
  formulation   Formulation  @relation(fields: [formulation_id], references: [id])

  @@index([brand_id], map: "idx_medicines_brand")
  @@index([wholesaler_id], map: "idx_medicines_wholesaler")
  @@index([formulation_id], map: "idx_medicines_formulation")
  @@index([price], map: "idx_medicines_price")
  @@index([stock_quantity], map: "idx_medicines_stock")
  @@index([expiry_date], map: "idx_medicines_expiry")
  @@index([createdAt], map: "idx_medicines_created_at")
  @@map("medicines")
}